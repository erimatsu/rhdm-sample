package com.example.rhdm

import com.example.rhdm.*

dialect "java"

rule "利用回数２回未満、利用額１万未満"
	when
		$過去利用:過去利用状況(2 > 過去利用回数, 過去利用額計 < 10000)
		$今回利用:今回利用(ユーザーID == $過去利用.ユーザーID)
	then		
//		modify($今回利用) {set割引ランク("X")}
		$今回利用.set割引ランク("X");
		System.out.println($今回利用.getユーザーID() + "の割引ランクは"+ $今回利用.get割引ランク() + "です");
end

/*
rule "利用回数２回未満、利用額１万以上１０万未満"
	when
		$過去利用:過去利用状況(過去利用回数 < 2, 過去利用額計 >= 10000, 過去利用額計 < 100000)
		$今回利用:今回利用(ユーザーID == $過去利用.ユーザーID)
	then
//		modify($今回利用) {set割引ランク("E")}
		$今回利用.set割引ランク("E");
		System.out.println($今回利用.getユーザーID() + "の割引ランクは"+ $今回利用.get割引ランク() + "です");
end

rule "利用回数２回以上5回未満、利用額１万未満"
	when
		$過去利用:過去利用状況(過去利用回数 >= 2, 過去利用回数 < 5, 過去利用額計 < 10000)
		$今回利用:今回利用(ユーザーID == $過去利用.ユーザーID)
	then
//		modify($今回利用) {set割引ランク("E")}
		$今回利用.set割引ランク("E");
		System.out.println($今回利用.getユーザーID() + "の割引ランクは"+ $今回利用.get割引ランク() + "です");
end

rule "利用回数２回以上5回未満、利用額１万以上１０万未満"
	when
		$過去利用:過去利用状況(過去利用回数 >= 2, 過去利用回数 < 5, 過去利用額計 >= 10000, 過去利用額計 < 100000)
		$今回利用:今回利用(ユーザーID == $過去利用.ユーザーID)
	then
//		modify($今回利用) {set割引ランク("D")}
		$今回利用.set割引ランク("D");
		System.out.println($今回利用.getユーザーID() + "の割引ランクは"+ $今回利用.get割引ランク() + "です");
end

rule "割引ランクX割引率設定"
	when
		$今回利用:今回利用(割引ランク == "X")
	then
		$今回利用.set割引率(0);
		System.out.println($今回利用.getユーザーID() + "の割引率は"+ $今回利用.get割引率() + "です");
end

rule "割引ランクE割引率設定"
	when
		$今回利用:今回利用(割引ランク == "E")
	then
		$今回利用.set割引率(3);
		System.out.println($今回利用.getユーザーID() + "の割引率は"+ $今回利用.get割引率() + "です");
end

rule "割引ランクD割引率設定"
	when
		$今回利用:今回利用(割引ランク == "D")
	then
		$今回利用.set割引率(5);
		System.out.println($今回利用.getユーザーID() + "の割引率は"+ $今回利用.get割引率() + "です");
end
*/